<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <title>haifeng's blog</title>
  <meta name="author" content="haifeng">

  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://haifengwei.github.io/">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="haifeng's blog" type="application/atom+xml">

  <!-- http://opengraphprotocol.org/ -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:type" content="website">
  <meta property="og:url" content="http://haifengwei.github.io/">
  <meta property="og:title" content="haifeng's blog">
  

  <script src="/javascripts/libs/jquery/jquery-2.1.3.min.js"></script>

<link href="/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">


  
  <link href="/stylesheets/screen.css" media="screen, projection, print" rel="stylesheet" type="text/css">

  

</head>

  <body   >
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="wrap">
      
      <div id="banner-image">
        <div class="layer">
          <div id="banner-text">
            <h1 class="page-title">haifeng's blog</h1>
            <p class="page-desc">
              éšä¾¿å†™å†™<br>
            </p>
            <br>
            <br>
            <div class="page-links center">
              <ul class="index-nav">
                  <li ><a href="/category">Categories</a></li>
<li ><a href="/blog/archives">Archives</a></li>
<li ><a href="/about">About</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      
      <div id="main" role="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content">
    <div class="blog-index" itemscope itemtype="http://schema.org/Blog">
    <meta itemprop="name" content="haifeng's blog" />
    
    <meta itemprop="url" content="http://haifengwei.github.io" />
      
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2017-04-27T10:14:04+08:00"  data-updated="true" itemprop="datePublished dateCreated">Thu 27 Apr 2017, 10:14 AM</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2017/04/27/chu-shi-calayer/" itemprop="url">åˆè¯†CALayer</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><h3>ä¸€ã€Layerç®€ä»‹</h3>

<p>â€‚â€‚â€‚â€‚â€‚CALayeræ˜¯å®šä¹‰åœ¨QuartzCoreæ¡†æ¶ä¸­çš„(Core Animation)ï¼Œå®ƒæ˜¯ç»˜å›¾å’ŒåŠ¨ç”»çš„åŸºç¡€ï¼Œæ˜¯åœ¨3Dç©ºé—´ä¸­çš„2Då¹³é¢ã€‚CALayerç®¡ç†çš„å‡ ä½•ï¼ˆä¾‹å¦‚rotateï¼Œtransfromï¼‰ï¼Œå†…å®¹ï¼ˆimageç­‰ï¼‰ï¼Œå’Œå¯è§†å±æ€§ï¼ˆbackgroundColorï¼Œalphaï¼‰ç­‰ä¿¡æ¯ã€‚CALayerä¸»è¦é€šè¿‡ç®¡ç†bitmapæ¥ç»´æŠ¤è‡ªå·±çš„çŠ¶æ€ä¿¡æ¯ï¼Œä»è¿™ä¸€ç‚¹ä¸Šæ¥è¯´ï¼ŒLayerå¯ä»¥çœ‹ä½œå¯¹è±¡æ¨¡å‹ï¼Œå› ä¸ºä»–ä»¬ä¸»è¦ç”¨æ¥ç®¡ç†æ•°æ®ã€‚</p>

<h3>äºŒã€Layerä¸bitmapçš„å…³ç³»</h3>

<p>â€‚â€‚â€‚â€‚â€‚â€‚Layeræ˜¯åŸºäºbitmapçš„ï¼Œå®ƒä¼šæ•è·Viewè¦å‘ˆç°çš„å†…å®¹ï¼Œç„¶åcacheåœ¨ä¸€ä¸ªbitmapä¸­ï¼Œè¿™ä¸ªbitmapå¯ä»¥çœ‹ä½œä¸€ä¸ªå¯¹è±¡ã€‚è¿™æ ·æ¯æ¬¡è¿›è¡Œæ“ä½œï¼Œä¾‹å¦‚å¹³ç§»æ—‹è½¬ç­‰ï¼Œåªæ˜¯bitmapçš„çŸ©é˜µè¿ç®—ã€‚</p>

<p>â€‚â€‚â€‚â€‚â€‚â€‚ç”±äºåŸºäºLayerçš„ç»˜åˆ¶æ˜¯å¤„ç†é™æ€çš„Bitmapçš„ï¼Œè€Œbitmapçš„å¤„ç†åˆæ˜¯GPUæ‰€æ“…é•¿çš„ï¼Œæ‰€ä»¥å®ƒçš„æ•ˆç‡è¦æ¯”åŸºäºViewç»˜åˆ¶çš„é«˜å¾ˆå¤šï¼Œå› ä¸ºåŸºäºViewç»˜åˆ¶çš„æ¯æ¬¡éƒ½è¦è¿›è¡ŒdrawRectçš„è°ƒç”¨é‡æ–°ç»˜åˆ¶ã€‚</p>

<h3>ä¸‰ã€UIViewä¸CALayerçš„å…³ç³»</h3>

<p>â€‚â€‚â€‚â€‚â€‚â€‚æ—¢ç„¶è¯´CALayer ï¼Œé‚£ä¹ˆUIViewè‚¯å®šè¦æä¸€ä¸‹ï¼Œ UIViewæ˜¯iOSç³»ç»Ÿä¸­ç•Œé¢å…ƒç´ çš„åŸºç¡€ï¼Œæ‰€æœ‰çš„ç•Œé¢å…ƒç´ éƒ½ç»§æ‰¿è‡ªå®ƒã€‚åœ¨åˆ›å»ºUIViewå¯¹è±¡æ—¶ï¼ŒUIViewå†…éƒ¨ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªå›¾å±‚(å³CALayerå¯¹è±¡)ï¼Œé€šè¿‡UIViewçš„layerå±æ€§å¯ä»¥è®¿é—®è¿™ä¸ªå±‚ã€‚UIViewæœ¬èº«æ›´åƒæ˜¯ä¸€ä¸ªCALayerçš„ç®¡ç†å™¨ï¼Œè®¿é—®å®ƒçš„è·Ÿç»˜å›¾å’Œè·Ÿåæ ‡æœ‰å…³çš„å±æ€§ï¼Œä¾‹å¦‚frameï¼Œboundsç­‰ç­‰ï¼Œå®é™…ä¸Šå†…éƒ¨éƒ½æ˜¯åœ¨è®¿é—®å®ƒæ‰€åŒ…å«çš„CALayerçš„ç›¸å…³å±æ€§ã€‚</p>

<p>â€‚â€‚â€‚â€‚â€‚â€‚å¦å¤–UIViewå’ŒCALayeræœ€å¤§çš„åŒºåˆ«å°±æ˜¯UIViewå¯ä»¥æ¥å—ç”¨æˆ·è¾“å…¥ï¼ˆä¾‹å¦‚è§¦æ‘¸ï¼‰è€ŒCALayerä¸å¯ä»¥ï¼ŒCALayerå•ç‹¬å¹¶ä¸èƒ½å‘ˆç°å‡ºä»»ä½•å¯è§†çš„å†…å®¹ï¼Œå¿…é¡»ä¾æ‰˜äºUIViewã€‚CALayeråªæ˜¯å‡ ä½•ä¸Šå‘ˆç°ç»™ç”¨æˆ·çš„ä¸œè¥¿ï¼Œå®ƒè¾ƒä¸ºè½»é‡ï¼Œé€šå¸¸é‡‡ç”¨CacheæŠ€æœ¯ï¼Œå¯¹èµ„æºæ¶ˆè€—ä¹Ÿè¾ƒå°ã€‚</p>

<p>â€‚â€‚â€‚â€‚â€‚â€‚UIViewå’ŒCALayerå…³ç³»å›¾å¦‚ä¸‹ï¼š
â€‚â€‚â€‚â€‚â€‚â€‚
<img src="http://cc.cocimg.com/api/uploads/20161204/1480865231251244.png" alt="å…³ç³»å›¾" /></p>

<h3>å››ã€anchorPointå’Œposition</h3>

<p> â€‚â€‚anchorPointå’Œpositionå’ŒUIViewä¸åŒï¼ŒLayerä¸»è¦ç”±ä¸‰ä¸ªå±æ€§æ¥è®¾ç½®ä½ç½®ï¼ˆæå°‘ç”¨<code>Frameï¼šbounds</code>ï¼  è®¾ç½®å¤§å°ï¼‰</p>

<ul>
<li>anchorPointâ€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚è®¾ç½®é”šç‚¹ï¼ˆé”šç‚¹å¯¹åç»­çš„layeråŠ¨ç”»æœ‰å¾ˆå¤§å½±å“ï¼‰</li>
<li>positionâ€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚é”šç‚¹åœ¨superLayerä¸­çš„ä½ç½®</li>
</ul>


<p>â€‚â€‚â€‚â€‚â€‚â€‚è¿™æ ·è¯´æœ‰ç‚¹æŠ½è±¡ï¼Œæˆ‘ä»¬çœ‹çœ‹ä»¥ä¸‹çš„å›¾å°±äº†è§£äº†å¯¹äºiOSæ¥è¯´ï¼Œåæ ‡ç³»å¦‚å›¾ï¼ŒarchPointï¼ˆx,yï¼‰çš„ä¸¤ä¸ªå€¼é€šå¸¸å–0.0-1.0,é»˜è®¤å€¼æ˜¯ï¼ˆ0.5ï¼Œ0.5ï¼‰è¿™é‡Œçš„å€¼å¯ä»¥çœ‹ä½œæ‰€å ç”¨xçš„æ¯”ä¾‹ï¼Œæ¯”å¦‚é»˜è®¤çš„0.5ï¼Œ0.5å°±æ˜¯åœ¨xçš„ä¸­é—´å’Œyçš„ä¸­é—´ã€‚
ï¿¼<img src="http://upload-images.jianshu.io/upload_images/2782212-f61aade513ffd51e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="20150110130108359.png" /></p>

<p>â€‚â€‚â€‚â€‚â€‚â€‚è€Œpositionåˆ™æ˜¯AnchorPointåœ¨super layerä¸­çš„ä½ç½®
å¦‚ä¸‹å›¾
<img src="http://upload-images.jianshu.io/upload_images/2782212-071d76aaa3517d68.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="20150110130534295.png" /></p>

<h3>äº”ã€ç®¡ç†Layerå†…å®¹çš„å‡ ä¸ªå‡½æ•°</h3>

<ul>
<li>addSublayer:</li>
<li>insertSublayer:above:</li>
<li>insertSublayer:atIndex:</li>
<li>insertSublayer:below:</li>
<li>removeFromSuperlayer</li>
<li>replaceSublayer:with:</li>
</ul>


<h3>å…­ã€Layeræ”¯æŒç»§æ‰¿ï¼Œæ”¯æŒæ·»åŠ Sublayerï¼Œæ”¯æŒå¯¹sublayerè¿›è¡Œå±‚æ¬¡è°ƒæ•´</h3>

<ul>
<li>CAEmitterLayerâ€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚å‘å°„å™¨å±‚ï¼Œç”¨æ¥æ§åˆ¶ç²’å­æ•ˆæœ</li>
<li>CAGradientLayerâ€‚â€‚â€‚â€‚â€‚  â€‚â€‚â€‚â€‚æ¢¯åº¦å±‚ï¼Œé¢œè‰²æ¸å˜</li>
<li>CAEAGLayerâ€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚ç”¨OpenGL ESç»˜åˆ¶çš„å±‚</li>
<li>CAReplicationLayerâ€‚â€‚â€‚â€‚â€‚â€‚ç”¨æ¥è‡ªåŠ¨å¤åˆ¶sublayer</li>
<li>CAScrollLayerâ€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚ç”¨æ¥ç®¡ç†å¯æ»‘åŠ¨çš„åŒºåŸŸ</li>
<li>CAShapeLayerâ€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚ç»˜åˆ¶ç«‹ä½“çš„è´å¡å°”æ›²çº¿</li>
<li>CATextLayerâ€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚ â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚å¯ä»¥ç»˜åˆ¶AttributeString</li>
<li>CATiledLayerâ€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚ç”¨æ¥ç®¡ç†ä¸€å‰¯å¯ä»¥è¢«åˆ†å‰²çš„å¤§å›¾</li>
<li>CATransformLayerâ€‚â€‚â€‚â€‚ â€‚â€‚â€‚ç”¨æ¥æ¸²æŸ“3D layerçš„å±‚æ¬¡ç»“æ„</li>
</ul>


<p>æ–‡ç« å‚è€ƒï¼š<a href="http://blog.csdn.net/hello_hwc?viewmode=contents">ã€Š IOS SDKè¯¦è§£ä¹‹CALayerï¼ˆä¸€ï¼‰ã€‹</a>ã€<a href="http://www.jianshu.com/p/b64f9a1bdd1b">ã€Šåˆæ¢CALayerå±æ€§ã€‹</a></p>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2017-04-26T09:36:38+08:00"  data-updated="true" itemprop="datePublished dateCreated">Wed 26 Apr 2017,  9:36 AM</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2017/04/26/yong-octopresshe-githubda-jian-ge-ren-bo-ke-yu-dao-de-keng/" itemprop="url">ç”¨Octopresså’ŒGitHubæ­å»ºä¸ªäººåšå®¢é‡åˆ°çš„å‘</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>ç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šå…³äºæ­å»ºOctopressçš„æ–‡ç« ï¼Œæ‰€ä»¥æˆ‘å†™ç¯‡æ–‡ç« ç›®çš„è®°å½•ä¸‹æˆ‘æ­å»ºblogè¿‡ç¨‹ä¸­é‡åˆ°çš„å‘ï¼Œå¦‚æœ‰äººé‡åˆ°ç›¸åŒé—®é¢˜å¯ä»¥å‚è€ƒä¸€ä¸‹ğŸ˜ã€‚</div>
  
  
    <footer>
      <a class="read-more btn btn-default" href="/blog/2017/04/26/yong-octopresshe-githubda-jian-ge-ren-bo-ke-yu-dao-de-keng/">Read on &rarr;</a>
    </footer>
  


        </article>
      
    </div>

    <ul class="pager">
      
        <li class="previous disabled"><a href="#">&larr;&nbsp;Older</a></li>
      
      <li><a href="/blog/archives">Blog Archives</a></li>
      
        <li class="next disabled"><a href="#">Newer&nbsp;&rarr;</a></li>
      
    </ul>
  </div>
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2017 - haifeng<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/bhrigu123/abacus">abacus theme</a></span>.
  </small>
</p>

</div>
</footer>
    







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr.js"></script>


  </body>
</html>
